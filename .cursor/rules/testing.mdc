---
description: Testing requirements for the project
globs: ["**/tests/**", "**/*_test.rs"]
---

# Testing Rules

## Requirement (DR4)

All code changes require passing tests. No exceptions.

## Rust Tests

Location: `daemon/tests/` or inline `#[cfg(test)]`

```bash
cargo test
```

Test categories:
- Unit: Individual functions
- Integration: Storage, MCP tools

## Test Naming

Format: `test_<what>_<condition>_<expected>`

Examples:
- `test_store_memory_new_returns_success`
- `test_store_memory_duplicate_increments_use_count`
- `test_get_memory_by_type_filters_correctly`

## Coverage Target

Aim for 80% coverage on business logic. Don't obsess over 100%.
